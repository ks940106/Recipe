<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="reservation">
  	<select id="selectReservation" resultType="reservation">
		select distinct
		caravan_no as caravanNo 
		from reservation where caravan_no not in
		(select distinct caravan_no from reservation a where 
		<foreach item="addr" collection="array" separator="or">
				reservation_date like '%'||#{addr}||'%'
		</foreach>
		) order by caravan_no
	</select>
	<insert id="insertReservation" parameterType="map">
		insert into reservation values(#{caravanNo},#{reservationDateString})
	</insert>
</mapper>
