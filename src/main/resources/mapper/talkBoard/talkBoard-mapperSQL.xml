<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="mybatis">
  
  <select id="mainBoard" parameterType="pp" resultType="talk">
  	select board_no as boardNo,
  	board_type as boardType,
  	nickname as nickname,
  	board_img as boardImg,
  	board_contents as boardContents
  	from(SELECT ROWNUM AS RNUM, M.*FROM (select * from board order by board_no desc) M) WHERE RNUM BETWEEN #{start} AND #{end}
  </select>
  
  <select id="boardType" parameterType="pp" resultType="talk">
  	select board_no as boardNo,
  	board_type as boardType,
  	nickname as nickname,
  	board_img as boardImg,
  	board_contents as boardContents
  	from(SELECT ROWNUM AS RNUM, M.*FROM (select * from board where board_type = #{type} order by board_no desc) M) WHERE RNUM BETWEEN #{start} AND #{end}
  </select>
  
  <insert id="insertTalkBoard" parameterType="talk">
  	insert into board values(req_board_no.nextval,#{boardType},#{nickname},#{boardImg},#{boardContents})
  </insert>
  
   <select id="selectTalkBoard" parameterType="talk" resultType="talk">
  	select board_no as boardNo,
  	board_type as boardType,
  	nickname as nickname,
  	board_img as boardImg,
  	board_contents as boardContents
  	from board where board_no = #{boardNo}
  </select>
  <delete id="deleteTalkBoard">
  	delete from board where board_no = #{boardNo}
  </delete>
  <update id="updateTalkBoard" parameterType="talk">
  	update board set board_img = #{boardImg}, board_contents = #{boardContents} where board_no = #{boardNo}
  </update>
  
  <select id="seeUserCount" parameterType="talk" resultType="_int">
  	select count(*) cnt from board
  </select>
  
  <select id="seeBoardTypeCount" parameterType="string" resultType="_int">
  	select count(*) cnt from board where board_type = #{type}
  </select>
</mapper>