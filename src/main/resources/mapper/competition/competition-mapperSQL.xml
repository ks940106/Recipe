<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="competition">
	<select id="competitionList" resultType="competition">
		select competition_no as competitionNo,
		competition_title as competitionTitle,
		competition_contents as competitionContents,
		competition_img as competitionImg,
		competition_video as competitionVideo,
		competition_result as competitionResult,
		competition_date as competitionDate,
		competition_check as competitionCheck
		from competition where competition_check='N'
	</select>
	<insert id="insertCompetition" parameterType="competition">
		insert into competition values(seq_competition_no.nextval,#{competitionTitle},#{competitionContents},#{competitionImg, jdbcType=VARCHAR},null,null,sysdate,#{competitionCheck})
	</insert>
	<select id="competitionView" parameterType="competition" resultType="competition">
		select competition_no as competitionNo,
		competition_title as competitionTitle,
		competition_contents as competitionContents,
		competition_img as competitionImg,
		competition_video as competitionVideo,
		competition_result as competitionResult,
		competition_date as competitionDate,
		competition_check as competitionCheck
		from (select rownum as rnum,c.* from( select * from competition where competition_check='Y' order by competition_no desc) c) where rnum= 1
	</select>
	<delete id="deleteCompetition" parameterType="_int">
		delete from competition where competition_no=#{competitionNo}
	</delete>
	<select id="updateSelectOne" parameterType="_int" resultType="competition">
		select competition_no as competitionNo,
		competition_title as competitionTitle,
		competition_contents as competitionContents,
		competition_img as competitionImg,
		competition_video as competitionVideo,
		competition_result as competitionResult,
		competition_date as competitionDate,
		competition_check as competitionCheck
		from competition where competition_no=#{competitionNo}
	</select>
	<update id="competitionUpdate" parameterType="competition">
		update competition set competition_title=#{competitionTitle} , competition_contents=#{competitionContents} , competition_img=#{competitionImg, jdbcType=VARCHAR},competition_check=#{competitionCheck} 
		where competition_no=#{competitionNo}
	</update>
	<select id="competitionResultView" resultType="competition" parameterType="_int">
		select competition_no as competitionNo,
		competition_title as competitionTitle,
		competition_contents as competitionContents,
		competition_img as competitionImg,
		competition_video as competitionVideo,
		competition_result as competitionResult,
		competition_date as competitionDate,
		competition_check as competitionCheck
		from competition where competition_No=#{competitionNo}
	</select>
</mapper>
